(()=>{"use strict";const t=new class{constructor(){this.board=null}createBoard(t){const e=document.createElement("div");e.classList.add("board"),e.classList.add("hammer");for(let s=0;s<Math.floor(t)**2;s+=1){const s=document.createElement("div");s.classList.add("cell"),e.appendChild(s),e.lastElementChild.style.width=100/t+"%",e.lastElementChild.style.height=100/t+"%"}this.board=e}getBoard(t){return this.createBoard(t),this.board}},e=new class{constructor(){this.hero=void 0}createHero(){const t=document.createElement("div");t.classList.add("tengu"),this.hero=t}getHero(){return this.createHero(),this.hero}},s=new class{constructor(t,e){this.board=t,this.boardSize=8,this.hero=e,this.activeHero=null,this.boardListeners=[]}init(){this.redrawBoard(),this.board.addEventListener("click",this.onBoardClick.bind(this)),this.start()}redrawBoard(){this.board=this.board.getBoard(this.boardSize);const t=document.createElement("h1"),e=document.querySelector("body"),s=document.createElement("div");s.classList.add("container"),t.classList.add("title"),this.counter=this.createTenguCounter(),s.appendChild(t),s.appendChild(this.counter),s.appendChild(this.board),e.insertBefore(s,e.firstChild),this.cells=[...this.board.children]}createTenguCounter(){return this.tenguCounter=document.createElement("div"),this.tenguCounter.classList.add("status"),this.tenguCounter.innerHTML='Убито Тэнгу:<span class="dead">0</span><br>Промахов: <span class="lost">0</span><br>',this.tenguCounter}onBoardClick(t){t.preventDefault(),this.dead=document.querySelector(".dead"),this.lost=document.querySelector(".lost"),this.boardListeners.forEach((e=>e(t.target))),console.log(this.boardListeners),t.target.classList.contains("tengu")?(++this.dead.textContent,t.target.classList.remove("tengu")):++this.lost.textContent,this.dead.textContent>=10&&(this.resetScore(),alert("Победа!!")),this.lost.textContent>=5&&(this.resetScore(),alert("Поражение!")),this.changeCursor()}generatePosition(){const t=Math.floor(Math.random()*this.boardSize**2);t!==this.position?(this.deletedHero(),this.position=t,this.riseHero()):this.generatePosition()}deletedHero(){null!==this.activeHero&&this.cells[this.position].firstChild.remove()}riseHero(){this.activeHero=this.hero.getHero(),this.cells[this.position].appendChild(this.activeHero)}resetScore(){this.lost.textContent=0,this.dead.textContent=0}changeCursor(){this.board.classList.toggle("hammer"),this.board.classList.toggle("hammer-boom")}start(){setInterval((()=>{this.generatePosition()}),1e3)}}(t,e);s.init()})();